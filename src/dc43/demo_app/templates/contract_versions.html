{% extends "base.html" %}
{% block content %}
<h1>Contract {{ contract_id }}</h1>
<table class="table table-striped">
  <thead><tr><th>Version</th><th>Status</th><th>Dataset Path</th><th>Actions</th></tr></thead>
  <tbody>
  {% for c in contracts %}
  <tr>
    <td><a href="/contracts/{{ contract_id }}/{{ c.version }}">{{ c.version }}</a></td>
    <td>{{ c.status }}</td>
    <td>{{ c.path or '' }}</td>
    <td>
      <a class="btn btn-sm btn-primary" href="/contracts/{{ contract_id }}/{{ c.version }}/edit">Edit</a>
      {% if c.status == 'draft' %}
      <form method="post" action="/contracts/{{ contract_id }}/{{ c.version }}/validate" class="d-inline">
        <button class="btn btn-sm btn-success" type="submit">Validate</button>
      </form>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% if not contracts %}<p>No versions found.</p>{% endif %}
{% endblock %}
