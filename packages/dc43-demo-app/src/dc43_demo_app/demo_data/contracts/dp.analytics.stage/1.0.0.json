{
  "version": "1.0.0",
  "kind": "DataContract",
  "apiVersion": "3.0.2",
  "id": "dp.analytics.stage",
  "name": "Orders analytics staging",
  "description": {
    "usage": "Internal staging slice used to enrich orders before publishing the data product output."
  },
  "status": "active",
  "servers": [
    {
      "server": "local",
      "type": "filesystem",
      "path": "data/dp.analytics.stage.parquet",
      "format": "parquet",
      "customProperties": [
        {
          "property": "dc43.core.versioning",
          "value": {
            "mode": "delta",
            "timeTravel": "versionAsOf",
            "notes": "Use dataset_version as Delta time travel hint"
          }
        },
        {
          "property": "dc43.pathPattern",
          "value": "delta.`data/dp.analytics.stage.parquet` versionAsOf={version}"
        }
      ]
    }
  ],
  "schema": [
    {
      "name": "dp_analytics_stage",
      "properties": [
        {"name": "order_id", "physicalType": "integer", "required": true},
        {"name": "customer_id", "physicalType": "integer", "required": true},
        {"name": "order_ts", "physicalType": "string", "required": true},
        {"name": "amount", "physicalType": "double", "required": true},
        {"name": "currency", "physicalType": "string", "required": true},
        {"name": "customer_name", "physicalType": "string", "required": true},
        {"name": "customer_segment", "physicalType": "string", "required": false}
      ]
    }
  ]
}
